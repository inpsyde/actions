name: Set up WireGuard
description: Set up a WireGuard connection.

inputs:
  WIREGUARD_CONFIGURATION:
    description: Content of the WireGuard configuration file (.conf).
    required: true

runs:
  using: composite
  steps:
    - run: |
        sudo apt-get update && sudo apt-get install -y wireguard
        echo "${{ secrets.WIREGUARD_CONFIGURATION }}" > wg0.conf
        sudo chmod 600 wg0.conf
        sudo wg-quick up ./wg0.conf
      shell: bash

branding:
  icon: lock
  color: green
